# Example Email Format

This is an example of the email format that the workflow expects. Your automated system should send emails in this format, or you can customize the parsing logic to match your format.

## Email Subject
```
Daily Log - 2024-01-15
```
(The workflow doesn't parse the subject by default, but you can add subject filtering in the Gmail Trigger)

## Email Body (HTML)

```html
<!DOCTYPE html>
<html>
<body>
  <h2>Daily Work Log</h2>
  
  <p><strong>Client:</strong></p>
  <!-- START_CLIENT -->Acme Auto Care<!-- END_CLIENT -->
  
  <p><strong>Date:</strong></p>
  <!-- START_DATE -->2024-01-15<!-- END_DATE -->
  
  <p><strong>Description:</strong></p>
  <!-- START_DESC -->
  Completed Airtable base cleanup and optimization:
  - Removed duplicate records from Fuel Logs table
  - Restructured relationships between Daily Logs and Bulk Deliveries
  - Created formula fields for automated calculations
  - Tested all automations and data flows
  <!-- END_DESC -->
  
  <p><strong>Notes:</strong></p>
  <!-- START_NOTES -->
  Client requested additional reporting views. Will implement in next session.
  Identified opportunity to automate QuickBooks integration.
  <!-- END_NOTES -->
  
  <hr>
  <p><em>This log was automatically generated by your time tracking system.</em></p>
</body>
</html>
```

## Key Points

1. **HTML Comment Markers** - The data extraction relies on HTML comments like `<!-- START_CLIENT -->` and `<!-- END_CLIENT -->`. These are invisible in the rendered email but contain the structured data.

2. **Date Format** - Use ISO date format (YYYY-MM-DD) for consistency. The workflow uses this to generate the RecordID.

3. **Client Name** - Must match a client name in your Airtable Clients table (if using linked records). If the client doesn't exist, you'll need to handle that in Airtable.

4. **Multi-line Content** - Description and Notes can contain multiple lines, bullet points, or HTML formatting. The regex will capture everything between the markers.

5. **RecordID Generation** - The workflow automatically generates a RecordID like `20240115-AcmeAutoCare` (date without hyphens + client name). This prevents duplicate entries for the same client on the same day.

## Customizing the Format

If your emails use different markers or structure, modify the JavaScript parsing node:

```javascript
// Example: Using different markers
const clientMatch = text.match(/\[CLIENT_START\]([\s\S]*?)\[CLIENT_END\]/)?.[1]?.trim();

// Example: Extracting from plain text patterns
const clientMatch = text.match(/Client: (.*?)\n/)?.[1]?.trim();

// Example: Extracting hours worked
const hours = text.match(/<!-- START_HOURS -->([\s\S]*?)<!-- END_HOURS -->/)?.[1]?.trim();
```

## Sending Test Emails

To test the workflow, send yourself an email with this exact format, or use Gmail's "Compose" feature to send to yourself. Make sure:

1. Email is sent to the Gmail account connected to n8n
2. HTML is properly formatted
3. All required markers are present
4. Client name exists in your Airtable (if using linked records)

## How to Generate These Emails Automatically

Common approaches:

1. **Airtable Automation** - When a daily log record is marked "Done", trigger an email via Airtable automation with the formatted content
2. **Zapier/Make** - Create a workflow that formats and sends these emails
3. **Custom Script** - Write a script that queries your system and sends formatted emails
4. **Manual Entry** - Use a form tool (Typeform, Google Forms) that sends formatted confirmation emails
